
-- PROBLEM

hidepointprops()
remove("/home/gadok/work/adze-modeler/applications/Cooking_with_adze_modeler/AgrosvsFemm/snapshots/finest-mesh-solution/femm_solution.csv")
newdocument(0)
file_out = openfile("/home/gadok/work/adze-modeler/applications/Cooking_with_adze_modeler/AgrosvsFemm/snapshots/finest-mesh-solution/femm_solution.csv", "w")
mi_probdef(0.0,'millimeters','axi',1e-08, 1.0, 30, 0)
smartmesh(0)

-- MATERIAL DEFINITIONS

mi_addmaterial('J+', 1.0, 1.0, 0.0, 2.0, 0.0, 0, 0, 0.0, 0.0, 0, 0, 0.0, 0.0)
mi_addmaterial('air', 1.0, 1.0, 0.0, 0.0, 0.0, 0, 0, 0.0, 0.0, 0, 0, 0.0, 0.0)
mi_addmaterial('control', 1.0, 1.0, 0.0, 0.0, 0.0, 0, 0, 0.0, 0.0, 0, 0, 0.0, 0.0)

-- BOUNDARY DEFINITIONS

mi_addboundprop('a0', 0.0, 0.0, 0.0, 0, 0, 0, 0, 0, 0, 0, 0)

-- GEOMETRY

mi_addnode(0.0, -35.0)
mi_addnode(70.0, -35.0)
mi_addnode(70.0, 35.0)
mi_addnode(0.0, 35.0)
mi_addnode(0.0, 5.0)
mi_addnode(0.0, -5.0)
mi_addnode(5.0, -5.0)
mi_addnode(5.0, 5.0)
mi_addnode(1.0775719999999989, -15.0)
mi_addnode(2.0775720000000026, -15.0)
mi_addnode(2.077572, -13.5)
mi_addnode(1.0775720000000013, -13.5)
mi_addnode(12.081099, -13.5)
mi_addnode(13.081099, -13.5)
mi_addnode(13.081099, -12.0)
mi_addnode(12.081099, -12.0)
mi_addnode(5.120719, -12.0)
mi_addnode(6.120719, -12.0)
mi_addnode(6.120719, -10.5)
mi_addnode(5.120719, -10.5)
mi_addnode(20.172014, -10.5)
mi_addnode(21.172014, -10.5)
mi_addnode(21.172014, -9.0)
mi_addnode(20.172014, -9.0)
mi_addnode(16.271996, -9.0)
mi_addnode(17.271996, -9.0)
mi_addnode(17.271996, -7.5)
mi_addnode(16.271996, -7.5)
mi_addnode(5.526311, -7.5)
mi_addnode(6.526311, -7.5)
mi_addnode(6.526311, -6.0)
mi_addnode(5.526311, -6.0)
mi_addnode(25.74817800000001, -6.0)
mi_addnode(26.748178, -6.0)
mi_addnode(26.748178, -4.5)
mi_addnode(25.748178, -4.5)
mi_addnode(9.355905, -4.5)
mi_addnode(10.355905, -4.5)
mi_addnode(10.355905, -3.0)
mi_addnode(9.355905, -3.0)
mi_addnode(45.987766, -3.0)
mi_addnode(46.987766, -3.0)
mi_addnode(46.987766, -1.5)
mi_addnode(45.987766, -1.5)
mi_addnode(7.401189, -1.5)
mi_addnode(8.401189, -1.5)
mi_addnode(8.401189, 0.0)
mi_addnode(7.401189, 0.0)
mi_addnode(10.443497, 0.0)
mi_addnode(11.443497, 0.0)
mi_addnode(11.443497, 1.5)
mi_addnode(10.443497, 1.5)
mi_addnode(38.464941, 1.5)
mi_addnode(39.464941, 1.5)
mi_addnode(39.464941, 3.0)
mi_addnode(38.464941, 3.0)
mi_addnode(16.626341, 3.0)
mi_addnode(17.626341, 3.0)
mi_addnode(17.626341, 4.5)
mi_addnode(16.626341, 4.5)
mi_addnode(7.767936, 4.5)
mi_addnode(8.767936, 4.5)
mi_addnode(8.767936, 6.0)
mi_addnode(8.425435999999996, 6.0)
mi_addnode(7.767936, 6.0)
mi_addnode(9.425436, 6.0)
mi_addnode(9.425436, 7.5)
mi_addnode(8.425436, 7.5)
mi_addnode(22.641502, 7.5)
mi_addnode(23.641502, 7.5)
mi_addnode(23.641502, 9.0)
mi_addnode(22.641502, 9.0)
mi_addnode(46.928319, 9.0)
mi_addnode(47.928319, 9.0)
mi_addnode(47.928319, 10.5)
mi_addnode(46.928319, 10.5)
mi_addnode(5.69151, 10.5)
mi_addnode(6.69151, 10.5)
mi_addnode(6.69151, 12.0)
mi_addnode(5.915284999999999, 12.0)
mi_addnode(5.69151, 12.0)
mi_addnode(4.915285, 12.0)
mi_addnode(5.915285, 13.5)
mi_addnode(4.915285, 13.5)
mi_addnode(1.373434, 13.5)
mi_addnode(2.373434, 13.5)
mi_addnode(2.373434, 15.0)
mi_addnode(1.373434, 15.0)
mi_addsegment(70.0, -35.0, 70.0, 35.0)
mi_selectsegment(70.0, 0.0)
mi_setsegmentprop("a0", None, 1, 0, 0, "<None>")
mi_clearselected()
mi_addsegment(0.0, -35.0, 70.0, -35.0)
mi_selectsegment(35.0, -35.0)
mi_setsegmentprop("a0", None, 1, 0, 0, "<None>")
mi_clearselected()
mi_addsegment(70.0, 35.0, 0.0, 35.0)
mi_selectsegment(35.0, 35.0)
mi_setsegmentprop("a0", None, 1, 0, 0, "<None>")
mi_clearselected()
mi_addsegment(0.0, 5.0, 0.0, -5.0)
mi_selectsegment(0.0, 0.0)
mi_setsegmentprop("a0", None, 1, 0, 0, "<None>")
mi_clearselected()
mi_addsegment(0.0, 35.0, 0.0, 5.0)
mi_selectsegment(0.0, 20.0)
mi_setsegmentprop("a0", None, 1, 0, 0, "<None>")
mi_clearselected()
mi_addsegment(0.0, -5.0, 0.0, -35.0)
mi_selectsegment(0.0, -20.0)
mi_setsegmentprop("a0", None, 1, 0, 0, "<None>")
mi_clearselected()
mi_addsegment(0.0, -5.0, 5.0, -5.0)
mi_addsegment(5.0, -5.0, 5.0, 5.0)
mi_addsegment(5.0, 5.0, 0.0, 5.0)
mi_addsegment(1.0775719999999989, -15.0, 2.0775720000000026, -15.0)
mi_addsegment(2.077572, -15.0, 2.077572, -13.5)
mi_addsegment(2.077572, -13.5, 1.0775720000000013, -13.5)
mi_addsegment(1.077572, -13.5, 1.077572, -15.0)
mi_addsegment(12.081099, -13.5, 13.081099, -13.5)
mi_addsegment(13.081099, -13.5, 13.081099, -12.0)
mi_addsegment(13.081099, -12.0, 12.081099, -12.0)
mi_addsegment(12.081099, -12.0, 12.081099, -13.5)
mi_addsegment(5.120719, -12.0, 6.120719, -12.0)
mi_addsegment(6.120719, -12.0, 6.120719, -10.5)
mi_addsegment(6.120719, -10.5, 5.120719, -10.5)
mi_addsegment(5.120719, -10.5, 5.120719, -12.0)
mi_addsegment(20.172014, -10.5, 21.172014, -10.5)
mi_addsegment(21.172014, -10.5, 21.172014, -9.0)
mi_addsegment(21.172014, -9.0, 20.172014, -9.0)
mi_addsegment(20.172014, -9.0, 20.172014, -10.5)
mi_addsegment(16.271996, -9.0, 17.271996, -9.0)
mi_addsegment(17.271996, -9.0, 17.271996, -7.5)
mi_addsegment(17.271996, -7.5, 16.271996, -7.5)
mi_addsegment(16.271996, -7.5, 16.271996, -9.0)
mi_addsegment(5.526311, -7.5, 6.526311, -7.5)
mi_addsegment(6.526311, -7.5, 6.526311, -6.0)
mi_addsegment(6.526311, -6.0, 5.526311, -6.0)
mi_addsegment(5.526311, -6.0, 5.526311, -7.5)
mi_addsegment(25.74817800000001, -6.0, 26.748178, -6.0)
mi_addsegment(26.748178, -6.0, 26.748178, -4.5)
mi_addsegment(26.748178, -4.5, 25.748178, -4.5)
mi_addsegment(25.748178, -4.5, 25.748178, -6.0)
mi_addsegment(9.355905, -4.5, 10.355905, -4.5)
mi_addsegment(10.355905, -4.5, 10.355905, -3.0)
mi_addsegment(10.355905, -3.0, 9.355905, -3.0)
mi_addsegment(9.355905, -3.0, 9.355905, -4.5)
mi_addsegment(45.987766, -3.0, 46.987766, -3.0)
mi_addsegment(46.987766, -3.0, 46.987766, -1.5)
mi_addsegment(46.987766, -1.5, 45.987766, -1.5)
mi_addsegment(45.987766, -1.5, 45.987766, -3.0)
mi_addsegment(7.401189, -1.5, 8.401189, -1.5)
mi_addsegment(8.401189, -1.5, 8.401189, 0.0)
mi_addsegment(8.401189, 0.0, 7.401189, 0.0)
mi_addsegment(7.401189, 0.0, 7.401189, -1.5)
mi_addsegment(10.443497, 0.0, 11.443497, 0.0)
mi_addsegment(11.443497, 0.0, 11.443497, 1.5)
mi_addsegment(11.443497, 1.5, 10.443497, 1.5)
mi_addsegment(10.443497, 1.5, 10.443497, 0.0)
mi_addsegment(38.464941, 1.5, 39.464941, 1.5)
mi_addsegment(39.464941, 1.5, 39.464941, 3.0)
mi_addsegment(39.464940999999996, 3.0, 38.464941, 3.0)
mi_addsegment(38.464941, 3.0, 38.464941, 1.5)
mi_addsegment(16.626341, 3.0, 17.626341, 3.0)
mi_addsegment(17.626341, 3.0, 17.626341, 4.5)
mi_addsegment(17.626341, 4.5, 16.626341, 4.5)
mi_addsegment(16.626341, 4.5, 16.626341, 3.0)
mi_addsegment(7.767936, 4.5, 8.767936, 4.5)
mi_addsegment(8.767936, 4.5, 8.767936, 6.0)
mi_addsegment(8.767936, 6.0, 8.425435999999996, 6.0)
mi_addsegment(8.425435999999996, 6.0, 7.767936, 6.0)
mi_addsegment(7.767936, 6.0, 7.767936, 4.5)
mi_addsegment(8.767936, 6.0, 9.425436, 6.0)
mi_addsegment(9.425436, 6.0, 9.425436, 7.5)
mi_addsegment(9.425436, 7.5, 8.425436, 7.5)
mi_addsegment(8.425436, 7.5, 8.425436, 6.0)
mi_addsegment(22.641502, 7.5, 23.641502, 7.5)
mi_addsegment(23.641502, 7.5, 23.641502, 9.0)
mi_addsegment(23.641502, 9.0, 22.641502, 9.0)
mi_addsegment(22.641502, 9.0, 22.641502, 7.5)
mi_addsegment(46.928319, 9.0, 47.928319, 9.0)
mi_addsegment(47.928319, 9.0, 47.928319, 10.5)
mi_addsegment(47.928319, 10.5, 46.928319, 10.5)
mi_addsegment(46.928319, 10.5, 46.928319, 9.0)
mi_addsegment(5.69151, 10.5, 6.69151, 10.5)
mi_addsegment(6.69151, 10.5, 6.69151, 12.0)
mi_addsegment(6.69151, 12.0, 5.915284999999999, 12.0)
mi_addsegment(5.915284999999999, 12.0, 5.69151, 12.0)
mi_addsegment(5.69151, 12.0, 5.69151, 10.5)
mi_addsegment(4.915285, 12.0, 5.691510000000001, 12.0)
mi_addsegment(5.915285, 12.0, 5.915285, 13.5)
mi_addsegment(5.915285, 13.5, 4.915285, 13.5)
mi_addsegment(4.915285, 13.5, 4.915285, 12.0)
mi_addsegment(1.373434, 13.5, 2.373434, 13.5)
mi_addsegment(2.373434, 13.5, 2.373434, 15.0)
mi_addsegment(2.373434, 15.0, 1.373434, 15.0)
mi_addsegment(1.373434, 15.0, 1.373434, 13.5)

-- BLOCK LABELS

mi_addblocklabel(1.82757234384367, -14.25)
mi_selectlabel(1.82757234384367, -14.25)
mi_setblockprop('J+', 0, 0.1, '<None>', 0, 0, 0)
mi_clearselected()
mi_addblocklabel(12.8310986190214, -12.75)
mi_selectlabel(12.8310986190214, -12.75)
mi_setblockprop('J+', 0, 0.1, '<None>', 0, 0, 0)
mi_clearselected()
mi_addblocklabel(5.87071874756443, -11.25)
mi_selectlabel(5.87071874756443, -11.25)
mi_setblockprop('J+', 0, 0.1, '<None>', 0, 0, 0)
mi_clearselected()
mi_addblocklabel(20.9220140666903, -9.75)
mi_selectlabel(20.9220140666903, -9.75)
mi_setblockprop('J+', 0, 0.1, '<None>', 0, 0, 0)
mi_clearselected()
mi_addblocklabel(17.021996038583, -8.25)
mi_selectlabel(17.021996038583, -8.25)
mi_setblockprop('J+', 0, 0.1, '<None>', 0, 0, 0)
mi_clearselected()
mi_addblocklabel(6.27631142548928, -6.75)
mi_selectlabel(6.27631142548928, -6.75)
mi_setblockprop('J+', 0, 0.1, '<None>', 0, 0, 0)
mi_clearselected()
mi_addblocklabel(26.4981784448498, -5.25)
mi_selectlabel(26.4981784448498, -5.25)
mi_setblockprop('J+', 0, 0.1, '<None>', 0, 0, 0)
mi_clearselected()
mi_addblocklabel(10.10590470354692, -3.75)
mi_selectlabel(10.10590470354692, -3.75)
mi_setblockprop('J+', 0, 0.1, '<None>', 0, 0, 0)
mi_clearselected()
mi_addblocklabel(46.7377661249235, -2.25)
mi_selectlabel(46.7377661249235, -2.25)
mi_setblockprop('J+', 0, 0.1, '<None>', 0, 0, 0)
mi_clearselected()
mi_addblocklabel(8.15118928105421, -0.75)
mi_selectlabel(8.15118928105421, -0.75)
mi_setblockprop('J+', 0, 0.1, '<None>', 0, 0, 0)
mi_clearselected()
mi_addblocklabel(11.1934974707302, 0.75)
mi_selectlabel(11.1934974707302, 0.75)
mi_setblockprop('J+', 0, 0.1, '<None>', 0, 0, 0)
mi_clearselected()
mi_addblocklabel(39.2149413574651, 2.25)
mi_selectlabel(39.2149413574651, 2.25)
mi_setblockprop('J+', 0, 0.1, '<None>', 0, 0, 0)
mi_clearselected()
mi_addblocklabel(17.3763411147178, 3.75)
mi_selectlabel(17.3763411147178, 3.75)
mi_setblockprop('J+', 0, 0.1, '<None>', 0, 0, 0)
mi_clearselected()
mi_addblocklabel(8.517935505111929, 5.25)
mi_selectlabel(8.517935505111929, 5.25)
mi_setblockprop('J+', 0, 0.1, '<None>', 0, 0, 0)
mi_clearselected()
mi_addblocklabel(9.17543646671979, 6.75)
mi_selectlabel(9.17543646671979, 6.75)
mi_setblockprop('J+', 0, 0.1, '<None>', 0, 0, 0)
mi_clearselected()
mi_addblocklabel(23.3915022596837, 8.25)
mi_selectlabel(23.3915022596837, 8.25)
mi_setblockprop('J+', 0, 0.1, '<None>', 0, 0, 0)
mi_clearselected()
mi_addblocklabel(47.678319345423, 9.75)
mi_selectlabel(47.678319345423, 9.75)
mi_setblockprop('J+', 0, 0.1, '<None>', 0, 0, 0)
mi_clearselected()
mi_addblocklabel(6.44151040344659, 11.25)
mi_selectlabel(6.44151040344659, 11.25)
mi_setblockprop('J+', 0, 0.1, '<None>', 0, 0, 0)
mi_clearselected()
mi_addblocklabel(5.66528527435156, 12.75)
mi_selectlabel(5.66528527435156, 12.75)
mi_setblockprop('J+', 0, 0.1, '<None>', 0, 0, 0)
mi_clearselected()
mi_addblocklabel(2.12343445767236, 14.25)
mi_selectlabel(2.12343445767236, 14.25)
mi_setblockprop('J+', 0, 0.1, '<None>', 0, 0, 0)
mi_clearselected()
mi_addblocklabel(30, 30)
mi_selectlabel(30, 30)
mi_setblockprop('air', 0, 0.1, '<None>', 0, 0, 0)
mi_clearselected()
mi_addblocklabel(3, 0)
mi_selectlabel(3, 0)
mi_setblockprop('control', 0, 0.1, '<None>', 0, 0, 0)
mi_clearselected()

-- SOLVE

mi_saveas("/home/gadok/work/adze-modeler/applications/Cooking_with_adze_modeler/AgrosvsFemm/snapshots/finest-mesh-solution/femm_solution.fem")
mi_analyze(1)
mi_loadsolution()

-- POSTPROCESSING AND EXPORTING

A, B1, B2, Sig, E, H1, H2, Je, Js, Mu1, Mu2, Pe, Ph = mo_getpointvalues(5, 5)
write(file_out, "Bz, 5, 5, ", B2, "\n")
A, B1, B2, Sig, E, H1, H2, Je, Js, Mu1, Mu2, Pe, Ph = mo_getpointvalues(5, 5)
write(file_out, "Br, 5, 5, ", B1, "\n")
write(file_out, "nodes, ", mo_numnodes(), "\n")
write(file_out, "elements, ", mo_numelements(), "\n")

-- CLOSING STEPS

closefile(file_out)
mo_close()
mi_close()
quit()
